/*--------------------------------*- C++ -*----------------------------------*\
| OpenFOAM Engineering Manual                                                 |
| Turbulent Channel Flow Example                                              |
| blockMeshDict                                                               |
\*---------------------------------------------------------------------------*/

FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    location    "system";
    object      blockMeshDict;
}

// Units
convertToMeters 1;

// ------------------------------------------------------------------------- //
// Geometry parameters (edit these)
// ------------------------------------------------------------------------- //

// Channel dimensions
// x: streamwise, y: wall-normal, z: spanwise (thin for 2D + empty)
L   1.0;        // length [m]
H   0.02;       // channel height [m]
W   0.01;       // thickness [m] (2D uses empty in z)

// Mesh resolution (edit these)
// Nx: streamwise cells
// NyHalf: cells from wall to channel centerline (total Ny = 2*NyHalf)
// Nz: spanwise cells (use 1 for 2D)
Nx      200;
NyHalf  30;
Nz      1;

// Wall-normal grading (edit this)
// growth ratio from wall -> center in the lower half
// upper half uses inverse grading for symmetry
gy      20;

// ------------------------------------------------------------------------- //
// Vertices
// ------------------------------------------------------------------------- //
//
// We split the channel into two blocks in y to achieve symmetric wall grading:
//  - lower block: y = 0   -> H/2 (small near bottom wall)
//  - upper block: y = H/2 -> H   (small near top wall)

vertices
(
    // z = 0 plane
    (0     0       0)    // 0
    (L     0       0)    // 1
    (L     0.5*H   0)    // 2
    (0     0.5*H   0)    // 3
    (0     H       0)    // 4
    (L     H       0)    // 5

    // z = W plane
    (0     0       W)    // 6
    (L     0       W)    // 7
    (L     0.5*H   W)    // 8
    (0     0.5*H   W)    // 9
    (0     H       W)    // 10
    (L     H       W)    // 11
);

// ------------------------------------------------------------------------- //
// Blocks
// ------------------------------------------------------------------------- //

blocks
(
    // Lower half: y = 0 -> H/2, refined at bottom wall
    hex (0 1 2 3 6 7 8 9)  (Nx NyHalf Nz) simpleGrading (1 gy 1)

    // Upper half: y = H/2 -> H, refined at top wall (inverse grading)
    hex (3 2 5 4 9 8 11 10) (Nx NyHalf Nz) simpleGrading (1 (1/gy) 1)
);

// ------------------------------------------------------------------------- //
// Edges (none needed for straight channel)
// ------------------------------------------------------------------------- //

edges
(
);

// ------------------------------------------------------------------------- //
// Boundary patches
// ------------------------------------------------------------------------- //

boundary
(
    inlet
    {
        type patch;
        faces
        (
            (0 3 9 6)
            (3 4 10 9)
        );
    }

    outlet
    {
        type patch;
        faces
        (
            (1 7 8 2)
            (2 8 11 5)
        );
    }

    walls
    {
        type wall;
        faces
        (
            (0 6 7 1)     // bottom wall y=0
            (4 5 11 10)   // top wall y=H
        );
    }

    symmetry
    {
        type symmetryPlane;
        faces
        (
            // Leave empty unless you add a symmetry plane in geometry
        );
    }

    frontAndBack
    {
        type empty;
        faces
        (
            (0 1 2 3)     // z=0
            (6 9 8 7)     // z=W (lower)
            (3 2 5 4)     // z=0 (upper)
            (9 10 11 8)   // z=W (upper)
        );
    }
);

// ------------------------------------------------------------------------- //
// Merge patch pairs (none)
// ------------------------------------------------------------------------- //

mergePatchPairs
(
);
